(this["webpackJsonpredux-paint-app"]=this["webpackJsonpredux-paint-app"]||[]).push([[0],{29:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var c,r,o,i,a,s=n(0),u=n.n(s),f=n(9),d=n.n(f),l=n(3),b=function(t,e,n){e.length&&(t.strokeStyle=n,t.beginPath(),t.moveTo(e[0].x,e[0].y),e.forEach((function(e){t.lineTo(e.x,e.y),t.stroke()})),t.closePath())},j=function(t){var e=t.getContext("2d");e&&(e.fillStyle="white",e.fillRect(0,0,t.width,t.height))},x=function(t){return new Promise((function(e,n){if(!t)return n(null);t.toBlob(e)}))},O=(n(29),n(7)),h=n(8),p=h.a.div(c||(c=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  @media (max-width: 800px) {\n    max-width: 520px;\n    padding: 0 15px;\n  }\n"]))),v=h.a.div(r||(r=Object(O.a)(["\n  display: flex;\n  position: relative;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 5;\n  width: 100%;\n  height: 50px;\n  padding: 21px 21px;\n  font-size: 30px;\n  color: #d0fefe;\n  background-color: #1f3b4d;\n  cursor: default;\n"]))),k=h.a.div(o||(o=Object(O.a)(["\n  display: flex;\n"]))),m=h.a.div(i||(i=Object(O.a)(["\n  position: relative;\n  top: 0px;\n  left: 21px;\n  right: 21px;\n  flex-grow: 2;\n"]))),g=h.a.div(a||(a=Object(O.a)(["\n  flex-grow: 3;\n  margin-top: -21px;\n"]))),y=n(2),S=Object(y.b)("endStroke"),C=Object(y.c)({name:"currentStroke",initialState:{points:[],color:"#000"},reducers:{beginStroke:function(t,e){t.points=[e.payload]},updateStroke:function(t,e){t.points.push(e.payload)},setStrokeColor:function(t,e){t.color=e.payload}},extraReducers:function(t){t.addCase(S,(function(t){t.points=[]}))}}),w=C.reducer,E=C.actions,R=E.beginStroke,N=E.updateStroke,M=E.setStrokeColor,F=n(1),I=["#000000","#808080","#c0c0c0","#ffffff","#800000","#ff0000","#808000","#ffff00","#008000","#00ff00","#008080","#00ffff","#000080","#0000ff","#800080","#ff00ff","#808040","#ffff80","#004040","#00ff80","#0080ff","#80ffff","#004080","#8080ff","#8000ff","#ff0080","#804000","#ff8040","#FF6163","#CFFDBC"],T=function(){var t=Object(l.b)();return Object(F.jsx)("div",{className:"tool-container",children:Object(F.jsxs)("div",{className:"colors-panel",children:[Object(F.jsx)("div",{className:"title-bar-text",children:"Colors"}),Object(F.jsx)("div",{className:"colors",children:I.map((function(e){return Object(F.jsx)("div",{onClick:function(){!function(e){t(M(e))}(e)},className:"color",style:{backgroundColor:e}},e)}))})]})})},A=Object(y.c)({name:"historyIndex",initialState:0,reducers:{undo:function(t,e){return Math.min(t+1,e.payload)},redo:function(t){return Math.max(t-1,0)}},extraReducers:function(t){t.addCase(S,(function(){return 0}))}}),D=A.reducer,P=A.actions,B=P.undo,K=P.redo,U=function(t){return t.strokes},_=function(t){return t.strokes.length},J=function(){var t=Object(l.b)(),e=Object(l.c)(_);return Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{onClick:function(){return t(B(e))},children:"Undo"}),Object(F.jsx)("button",{onClick:function(){return t(K())},children:"Redo"})]})},q=Object(s.createContext)({}),z=function(){return Object(s.useContext)(q)},X=n(11),Y=n.n(X),G=n(17),L=n(18),W=function(){var t=z(),e=function(){var e=Object(G.a)(Y.a.mark((function e(){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.current);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:Object(L.saveAs)(n,"drawing.png");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{className:"tool-container",children:[Object(F.jsx)("div",{className:"title-bar-text",children:"File"}),Object(F.jsx)("button",{className:"save-button",onClick:e,children:"Export"})]})},H=function(t){return t.currentStroke},Q=function(t){return t.historyIndex};var V=function(){var t=Object(l.b)(),e=z(),n=Object(l.c)((function(t){return!!t.currentStroke.points.length})),c=Object(l.c)(H),r=Object(l.c)(Q),o=Object(l.c)(U),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.current;return{canvas:t,context:null===t||void 0===t?void 0:t.getContext("2d")}},a=function(){n&&t(S({historyIndex:r,stroke:c}))};return Object(s.useEffect)((function(){var t=i(),e=t.canvas,n=t.context;n&&e&&requestAnimationFrame((function(){j(e),o.slice(0,o.length-r).forEach((function(t){b(n,t.points,t.color)}))}))}),[r]),Object(s.useEffect)((function(){var t=i().context;t&&requestAnimationFrame((function(){return b(t,c.points,c.color)}))}),[c]),Object(s.useEffect)((function(){var t=i(),e=t.canvas,n=t.context;e&&n&&(!function(t,e,n){var c;t.width=2*e,t.height=2*n,t.style.width="".concat(e,"px"),t.style.height="".concat(n,"px"),null===(c=t.getContext("2d"))||void 0===c||c.scale(2,2)}(e,700,520),n.lineJoin="round",n.lineCap="round",n.lineWidth=3,n.strokeStyle="black",j(e))}),[]),Object(F.jsxs)(p,{children:[Object(F.jsxs)(v,{children:[Object(F.jsx)("div",{children:"React Redux Paint"}),Object(F.jsx)("div",{className:"author",children:"Alexander Komkov"})]}),Object(F.jsxs)(k,{children:[Object(F.jsx)(m,{children:Object(F.jsx)("canvas",{onMouseDown:function(e){var n=e.nativeEvent,c=n.offsetX,r=n.offsetY;t(R({x:c,y:r}))},onMouseUp:a,onMouseOut:a,onMouseMove:function(e){var c=e.nativeEvent;if(n){var r=c.offsetX,o=c.offsetY;t(N({x:r,y:o}))}},ref:e})}),Object(F.jsxs)(g,{children:[Object(F.jsx)(T,{}),Object(F.jsx)(J,{}),Object(F.jsx)(W,{})]})]})]})},Z=n(20),$=n(4),tt=(Object(y.b)("BEGIN_STROKE"),Object(y.b)("UPDATE_STROKE"),Object(y.b)("SET_STROKE_COLOR"),Object(y.b)("endStroke")),et=(Object(y.b)("UNDO"),Object(y.b)("REDO"),Object(y.c)({name:"strokes",initialState:[],reducers:{},extraReducers:function(t){t.addCase(tt,(function(t,e){var n=e.payload,c=n.historyIndex,r=n.stroke;0===c?t.push(r):t.splice(-c,c,r)}))}}).reducer),nt=n(19),ct=n.n(nt),rt=[].concat(Object(Z.a)(Object(y.d)()),[ct.a]),ot=Object(y.a)({reducer:Object($.b)({historyIndex:D,currentStroke:w,strokes:et}),middleware:rt});n(33);d.a.render(Object(F.jsx)(u.a.StrictMode,{children:Object(F.jsx)(l.a,{store:ot,children:Object(F.jsx)(V,{})})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.64ea1b58.chunk.js.map